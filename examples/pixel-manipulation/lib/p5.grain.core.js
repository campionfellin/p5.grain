/**!
 * p5.grain
 * 
 * @version 0.6.0
 * @license MIT
 * @copyright meezwhite, Gorilla Sun
 */
class P5Grain{version="0.6.0";#t;#e;#n;constructor(){this.#t=Math.random,this.#e={frameCount:0},this.#n={frameCount:0,tX_anchor:0,tX:0,tY:0}}setup(t){void 0===t?this.#t=random:"object"==typeof t&&"function"==typeof t.random&&(this.#t=t.random)}granulateSimple(t,e,n){const i=round(t),a=e||!1;n?n.loadPixels():loadPixels();const r=n?n.pixelDensity():pixelDensity(),o=width*r*4*(height*r),s=n?n.pixels:pixels;for(let t=0;t<o;t+=4){const e=this.#i(-i,i);s[t]=s[t]+e,s[t+1]=s[t+1]+e,s[t+2]=s[t+2]+e,a&&(s[t+3]=s[t+3]+e)}n?n.updatePixels():updatePixels()}granulateChannels(t,e,n){const i=round(t),a=e||!1;n?n.loadPixels():loadPixels();const r=n?n.pixelDensity():pixelDensity(),o=width*r*4*(height*r),s=n?n.pixels:pixels;for(let t=0;t<o;t+=4)s[t]=s[t]+this.#i(-i,i),s[t+1]=s[t+1]+this.#i(-i,i),s[t+2]=s[t+2]+this.#i(-i,i),a&&(s[t+3]=s[t+3]+this.#i(-i,i));n?n.updatePixels():updatePixels()}tinkerPixels(t,e,n){e=!1!==e,n?n.loadPixels():loadPixels();const i=n?n.pixelDensity():pixelDensity(),a=width*i*4*(height*i);for(let e=0;e<a;e+=4)t(e,a);e&&(n?n.updatePixels():updatePixels())}textureAnimate(t,e){const n=e&&e.atFrame?round(e.atFrame):2;if(this.#e.frameCount+=1,this.#e.frameCount>=n){const n=e&&e.amount?round(e.amount):min(width,height),i=floor(this.#t()*n),a=floor(this.#t()*n),r=`${i}px ${a}px`;t instanceof HTMLElement?t.style.backgroundPosition=r:t instanceof SVGElement?(t.style.top=-a+"px",t.style.left=-i+"px"):t instanceof p5.Element&&t.style("background-position",r),this.#e.frameCount=0}}textureOverlay(t,e,n){const i=n instanceof p5.Graphics,a=i?n.width:width,r=i?n.height:height,o=e.mode||MULTIPLY,s=e.reflect||!1,l=e.animate||!1,u=e.animate&&e.animate.atFrame?round(e.animate.atFrame):2,p=e.animate&&e.animate.amount?round(e.animate.amount):min(a,r),h="number"==typeof e.width?e.width:t.width,m="number"==typeof e.height?e.height:t.height;l&&(this.#n.frameCount+=1,this.#n.frameCount>=u&&(this.#n.tX_anchor=-floor(this.#t()*p),this.#n.tY=-floor(this.#t()*p),this.#n.frameCount=0));let d=this.#n.tX_anchor,x=this.#n.tY,c=!0,f=!0;for(n?n.blendMode(o):blendMode(o);x<r;){for(;d<a;){if(s?(i?n.push():push(),c?f?i?n.image(t,d,x,h,m):image(t,d,x,h,m):i?(n.scale(-1,1),n.image(t,-d,x,-h,m)):(scale(-1,1),image(t,-d,x,-h,m)):f?i?(n.scale(1,-1),n.image(t,d,-x,h,-m)):(scale(1,-1),image(t,d,-x,h,-m)):i?(n.scale(-1,-1),n.image(t,-d,-x,-h,-m)):(scale(-1,-1),image(t,-d,-x,-h,-m)),i?n.pop():pop()):i?n.image(t,d,x,h,m):image(t,d,x,h,m),d+=h,d>=a){f=!0,d=this.#n.tX_anchor,x+=m;break}f=!f}c=!c}n?n.blendMode(BLEND):blendMode(BLEND),i&&n.reset()}#i(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(this.#t()*(e-t+1)+t)}}const p5grain=new P5Grain;p5.prototype.granulateSimple=function(t,e){return p5grain.granulateSimple(t,e)},p5.Graphics.prototype.granulateSimple=function(t,e){return p5grain.granulateSimple(t,e,this)},p5.prototype.granulateChannels=function(t,e){return p5grain.granulateChannels(t,e)},p5.Graphics.prototype.granulateChannels=function(t,e){return p5grain.granulateChannels(t,e,this)},p5.prototype.tinkerPixels=function(t,e){return p5grain.tinkerPixels(t,e)},p5.Graphics.prototype.tinkerPixels=function(t,e){return p5grain.tinkerPixels(t,e,this)},p5.prototype.textureAnimate=function(t,e){return p5grain.textureAnimate(t,e)},p5.prototype.textureOverlay=function(t,e){return p5grain.textureOverlay(t,e)},p5.Graphics.prototype.textureOverlay=function(t,e){return p5grain.textureOverlay(t,e,this)};
